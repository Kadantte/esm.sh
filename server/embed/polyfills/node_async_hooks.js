/* esm.sh - esbuild bundle(unenv@1.9.0/runtime/node/async_hooks) esnext production */
var h=Object.defineProperty;var b=(n,e)=>{for(var t in e)h(n,t,{get:e[t],enumerable:!0})};var i=class{__unenv__=!0;_currentStore;_enterStore;_enabled=!0;getStore(){return this._currentStore??this._enterStore}disable(){this._enabled=!1}enable(){this._enabled=!0}enterWith(e){this._enterStore=e}run(e,t,...r){this._currentStore=e;let s=t(...r);return this._currentStore=void 0,s}exit(e,...t){let r=this._currentStore;this._currentStore=void 0;let s=e(...t);return this._currentStore=r,s}static snapshot(){throw new Error("[unenv] `AsyncLocalStorage.snapshot` is not implemented!")}},a=globalThis.AsyncLocalStorage||i;var u={};b(u,{AsyncHook:()=>d,createHook:()=>y,executionAsyncId:()=>l,executionAsyncResource:()=>p,triggerAsyncId:()=>f});var o=class{__unenv__=!0;_enabled=!1;_callbacks={};constructor(e={}){this._callbacks=e}enable(){return this._enabled=!0,this}disable(){return this._enabled=!1,this}init(e,t,r,s){this._enabled&&this._callbacks.init&&this._callbacks.init(e,t,r,s)}before(e){this._enabled&&this._callbacks.before&&this._callbacks.before(e)}after(e){this._enabled&&this._callbacks.after&&this._callbacks.after(e)}destroy(e){this._enabled&&this._callbacks.destroy&&this._callbacks.destroy(e)}promiseResolve(e){this._enabled&&this._callbacks.promiseResolve&&this._callbacks.promiseResolve(e)}},d=globalThis.AsyncHook||o,y=function(e){return new o(e)},l=function(){return 0},p=function(){return Object.create(null)},f=function(){return 0};var m=100,_=class{__unenv__=!0;type;_asyncId;_triggerAsyncId;constructor(e,t=l()){this.type=e,this._asyncId=-1*m++,this._triggerAsyncId=typeof t=="number"?t:t?.triggerAsyncId}static bind(e,t,r){return new c(t??"anonymous").bind(e)}bind(e,t){let r=(...s)=>this.runInAsyncScope(e,t,...s);return r.asyncResource=this,r}runInAsyncScope(e,t,...r){return e.apply(t,r)}emitDestroy(){return this}asyncId(){return this._asyncId}triggerAsyncId(){return this._triggerAsyncId}},c=globalThis.AsyncResource||_;var v={AsyncLocalStorage:a,AsyncResource:c,...u};export{d as AsyncHook,a as AsyncLocalStorage,c as AsyncResource,y as createHook,v as default,l as executionAsyncId,p as executionAsyncResource,f as triggerAsyncId};
